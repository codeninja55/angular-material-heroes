# Tutorial: Routing

| REFERENCES                               |
| ---------------------------------------- |
| [1]: https://angular.io/tutorial/toh-pt5 "Routing" |

------

There are new requirements for the Tour of Heroes app:

- Add a *Dashboard* view.
- Add the ability to navigate between the *Heroes* and *Dashboard* views.
- When users click a hero name in either view, navigate to a detail view of the selected hero.
- When users click a *deep link* in an email, open the detail view for a particular hero.

When youâ€™re done, users will be able to navigate the app like this:



// IMAGE



#### Add the *AppRoutingModule*

An Angular best practice is to load and configure the router in a separate, top-level module that is dedicated to routing and imported by the root `AppModule`.

By convention, the module class name is `AppRoutingModule` and it belongs in the `app-routing.module.ts` in the `src/app` folder.

Use the CLI to generate it.

```bash
$ ng g module app-routing --flat --module=app
```

* `--flat` puts the file in `src/app` instead of its own folder.
* `--module=app` tells the CLI to register it in the `imports` array of the `AppModule`.

The generated file looks like this:

###### src/app/app-routing.module.ts

```typescript
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';

@NgModule({
  imports: [
    CommonModule
  ],
  declarations: []
})

export class AppRoutingModule { }
```

You generally don't declare components in a routing module so you can delete the `@NgModule.declarations` array and delete `CommonModule`references too.

You'll configure the router with `Routes` in the `RouterModule` so import those two symbols from the `@angular/router` library.

Add an `@NgModule.exports` array with `RouterModule` in it. Exporting `RouterModule` makes router directives available for use in the `AppModule` components that will need them.

`AppRoutingModule` looks like this now:

###### src/app/app-routing.module.ts

```typescript
import { NgModule } from '@angular/core';
import { RouterModule, Routes } from '@angular/router';

@NgModule({
  exports: [ RouterModule ]
})

export class AppRoutingModule {}
```



#### Add routes

*Routes* tell the router which view to display when a user clicks a link or pastes a URL into the browser address bar.

A typical Angular `Route` has two properties:

1. `path`: a string that matches the URL in the browser address bar.
2. `component`: the component that the router should create when navigating to this route.

You intend to navigate to the `HeroesComponent` when the URL is something like `localhost:4200/heroes`.

Import the `HeroesComponent` so you can reference it in a `Route`. Then define an array of routes with a single `route` to that component.

###### src/app/app-routing.module.ts

```typescript
...

const routes: Routes = [
  { path: 'heroes', component: HeroesComponent }
];

@NgModule({
  ...
})

export class AppRoutingModule { }
```

Once you've finished setting up, the router will match that URL to `path: 'heroes'` and display the `HeroesComponent`.



#### *RouterModule.forRoot()*

You first must initialize the router and start it listening for browser location changes.

Add `RouterModule` to the `@NgModule.imports` array and configure it with the `routes` in one step by calling `RouterModule.forRoot()` *within*the `imports` array, like this:

###### src/app/app-routing.module.ts

```typescript
...

@NgModule({
  imports: [ RouterModule.forRoot(routes) ],
  exports: [ RouterModule ]
})

export class AppRoutingModule { }
```

> The method is called `forRoot()` because you configure the router at the application's root level. The `forRoot()` method supplies the service providers and directives needed for routing, and performs the initial navigation based on the current browser URL.



#### Add *RouterOutlet*

Open the `AppComponent` template replace the `<app-heroes>` element with a `<router-outlet>` element.

###### src/app/app.component.html

```html
...

<mat-sidenav-container class="sidenav-container">

  ...

  <mat-sidenav-content>
    <div class="col align-middle align-content-center red py-4">
      <h1 class="mat-display-1 text-center white-text mb-0">{{ title }}</h1>
    </div>

    <div class="col-sm-12">
      <router-outlet></router-outlet>
    </div>

  </mat-sidenav-content>
</mat-sidenav-container>
```

You removed `<app-heroes>` because you will only display the `HeroesComponent` when the user navigates to it.

The `<router-outlet>` tells the router where to display routed views.

> The `RouterOutlet` is one of the router directives that became available to the `AppComponent` because `AppModule` imports `AppRoutingModule` which exported `RouterModule`.

The browser should refresh and display the app title but not the list of heroes.

Look at the browser's address bar. The URL ends in `/`. The route path to `HeroesComponent` is `/heroes`.

Append `/heroes` to the URL in the browser address bar. You should see the familiar heroes master/detail view.



#### Add a navigation link (*routerLink*)

Users shouldn't have to paste a route URL into the address bar. They should be able to click a link to navigate.

Add a `<nav>` element and, within that, an anchor element that, when clicked, triggers navigation to the `HeroesComponent`. The revised `AppComponent` template looks like this:

###### src/app/app.component.html

```typescript
<app-mat-navbar (navToggle)="sidenav.toggle()"></app-mat-navbar>

<mat-sidenav-container class="sidenav-container">
  <mat-sidenav #sidenav class="sidenav white red-text pt-2" mode="over" 
  [opened]="false" [fixedInViewport]="fixed" [fixedTopGap]="0" [fixedBottomGap]="0">

    <div class="col p-0">
      <mat-nav-list class="mat-nav-list" (click)="sidenav.close()">
        <mat-list-item>
          <a matLine class="pl-3" routerLink="/heroes">
            <img src="../assets/img/mat-navbar/icons8-avengers-50.png" [width]="24">
            &nbsp;Heroes
          </a>
        </mat-list-item>
      </mat-nav-list>
    </div>

  </mat-sidenav>

  <mat-sidenav-content>
    <div class="col align-middle align-content-center red lighten-1 py-5">
      <h1 class="mat-display-1 text-center white-text mb-0">{{ title }}</h1>
    </div>

    <div class="col-sm-12">
      <router-outlet></router-outlet>
    </div>

  </mat-sidenav-content>
</mat-sidenav-container>

```

A [`routerLink` attribute](https://angular.io/tutorial/toh-pt5#routerlink) is set to `"/heroes"`, the string that the router matches to the route to `HeroesComponent`. The `routerLink` is the selector for the [`RouterLink` directive](https://angular.io/tutorial/toh-pt5#routerlink) that turns user clicks into router navigations. It's another of the public directives in the `RouterModule`.

The browser refreshes and displays the app title and heroes link, but not the heroes list.

Click the link. The address bar updates to `/heroes` and the list of heroes appears.

Please note, for our sidenav example, it is very import you add the ng-click attribute `(click)=sidenav.close()` otherwise the sidenav will not close when you click on a link. 

#### Add a dashboard view

Routing makes more sense when there are multiple views. So far there's only the heroes view.

Add a `DashboardComponent` using the CLI: